# passport_power
Данный проект посвящён анализу «силы» паспортов разных стран на основе требований к визам в сочетании с туристическим трафиков. 
В результате обработки данных из Википедии, Wikidata и открытых источников по туризму формируется рейтинг паспортов, отражающий их относительную ценность для путешествий.

## Краткое описание шагов анализа для passport_power_research

1. **Сбор визовых требований с Википедии**  
   - Используется MediaWiki API для обхода категории `Category:Visa_requirements_by_nationality` - здесь собраны визовые требования по странам.
   - Из каждой страницы извлекается инфобокс с ключевыми полями: название страны, категория требования (eVisa, виза по прибытию, безвиз и т. д.), сроки пребывания и пр.  

2. **Обработка и нормализация названий стран (Wikidata)**  
   - Выполняется SPARQL-запрос к Wikidata, чтобы получить список стран-членов ООН, их альтернативные названия (синонимы) на разных языках.  
   - Функции `clean_visa_data`, `map_country_aliases` и `normalize_country_names` приводят все записи к единому стандартизованному виду.  
   - На этом же этапе дополняем наши данные иноформацией из "region_map.txt" и "status_map.txt" - первый файл маппинг регионов для стран, второй - маппинг статусов для визовых требваний.

3. **Получение данных о туристическом трафике за 2024 год**  
   - Скачиваем CSV из Datawrapper (URL — открытый источник с рейтингом стран по количеству туристических прибытий).  
   - Дополняем наши данные инофрмацией о количество туристических прибытй за 2024 год

4. **Расчёт «силы» паспорта (Passport Power Index)**  
   - Для каждой страны определяем базовую метрику `Median` как соответствующее значение трафика (или используем дефолт 1500, если данных нет).  
   - Вычисляем логарифм `Root_Median = log(Median)`, нормируем в диапазон (0.001 … 1.0) → `Root_Median_Ratio`.  
   - Категории визовых требований переводятся в коэффициенты «легкости» (`freedom of movement = 1.0`, `visa not required = 1.0`, `eVisa/visa on arrival = 0.5`, `visa required = 0.2`, `admission refused = 0`).  
   - Итоговая метрика для каждой (гражданство × страна назначения) вычисляется как:  
     ```
     passport_power_by_traffic = Root_Median_Ratio * Коэффициент_легкости
     ```

5. **Формирование итогового рейтинга по странам и регионам**  
   - Группируем данные по гражданству (`citizen_country`) и региону (`Region`), суммируем `passport_power_by_traffic`.  
   - Сортируем по убыванию суммарного показателя и присваиваем ранги.  
   - Результат сохраняется в `ppi.csv` — таблица с полями:
     - `passport_power_by_traffic` (суммарная «сила» паспорта по региону)
     - `rank` (место в общем рейтинге)
